import{_ as n,o as r,c as o,a as s,b as p,d as t,e as i,r as c}from"./app-CNRroVhM.js";const l="/assets/1-lr8wpPPC.png",g="/assets/2-DQbXQmFz.png",h="/assets/3-CdU4x-zT.png",d="/assets/4-BJv0rs3r.png",_="/assets/5-CtSpq6IZ.png",m="/assets/6-BH_5oxv4.png",f="/assets/7-DIf6Rzrx.png",u="/assets/8-BVPbmF0j.jpg",x="/assets/9-DNDBI5Y6.jpg",b="/assets/10-Bm8SA6Mj.jpg",j="/assets/11-CFMkHj4l.jpg",v="/assets/12-BhuYGLtk.jpg",k={},q={href:"https://yinerda.yuque.com/yt1fh6/4gdtu/textbcabgx9evwvd",target:"_blank",rel:"noopener noreferrer"};function B(I,a){const e=c("ExternalLinkIcon");return r(),o("div",null,[a[2]||(a[2]=s('<h1 id="_4g模块与服务器通信-http协议" tabindex="-1"><a class="header-anchor" href="#_4g模块与服务器通信-http协议"><span>4g模块与服务器通信（http协议）</span></a></h1><p>分享如何使用stm32通过4g模块与服务器进行通信。</p><h3 id="_1-整体介绍" tabindex="-1"><a class="header-anchor" href="#_1-整体介绍"><span>1.整体介绍</span></a></h3><p>单片机与服务器通信就像单片机与单片机的串口通信，不同的是串口通信的数据线换成了4g模块</p><p>主要介绍如何使用4g模块。至于stm32的串口通信就不细写了</p><h4 id="环境" tabindex="-1"><a class="header-anchor" href="#环境"><span>环境</span></a></h4><p>硬件：stm32</p><p>​ YEDc780/YEDc100核心板+扩展版（4g模块<strong>dtu固件</strong>）</p><p>软件：用于与单片机通信的服务器接口</p><p>​ postman（测试接口功能的pc端软件）</p><p>​ 串口调试助手，keil</p><h3 id="_2-实现步骤" tabindex="-1"><a class="header-anchor" href="#_2-实现步骤"><span>2.实现步骤</span></a></h3><p>要打通一条通信链（stm-&gt;4g-&gt;服务器-&gt;4g-&gt;stm）,需要一步步测试，下面从服务器接口开始测试。</p><h4 id="_2-1测服务器接口" tabindex="-1"><a class="header-anchor" href="#_2-1测服务器接口"><span>2.1测服务器接口</span></a></h4><p>用postman测试服务器接口的url</p><p>从上到下介绍每一个红框</p><p>1.粘贴服务器接口的url（路径），红框左边的post根据实际修改为对应的请求方式</p><p>做服务器功能的人会给你url和请求方式（post/get）</p><p>2.测试的数据</p><p>这里的格式一定要是cjson格式，这个格式就是<code>{&quot;变量名&quot;:&quot;变量值&quot;}</code> 注意符号用英文格式</p><p>3.200ok说明通信正常，遇到别的报错码到浏览器直接搜或者问gpt就行</p><p>4.这里是服务器返回的数据，比如这次我的需求是发送uid返回uid是否存在，以变量flag的值来确定，在红框中看到flag的值，说明功能正常，当然也可以更改一下红框2的uid为数据库已经存在的，测试flag 的值是否返回1</p><p><img src="'+l+'" alt="9e11f9126ece7151ed8250521e26b85f"></p><h4 id="_2-2测试4g模块" tabindex="-1"><a class="header-anchor" href="#_2-2测试4g模块"><span>2.2测试4g模块</span></a></h4><p>4g模块我使用的是yedc780（dtu固件）</p><p>dtu固件和AT固件不同的是，dtu固件有一个专门用于配置的网页端后台，并且4g模块每次上电自动将配置更新到最新版本，并且可以批量分组操做，方便管理。</p>',26)),p("p",null,[a[1]||(a[1]=t("配置入门教程：")),p("a",q,[a[0]||(a[0]=t("参数配置入门教程")),i(e)])]),a[3]||(a[3]=s('<p><img src="'+g+'" alt="9e11f9126ece7151ed8250521e26b85f"></p><h5 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h5><p>配置串口参数和网络通道参数</p><p><img src="'+h+'" alt="9e11f9126ece7151ed8250521e26b85f"></p><h5 id="_2-2-1串口参数" tabindex="-1"><a class="header-anchor" href="#_2-2-1串口参数"><span>2.2.1串口参数</span></a></h5><h5 id="注意波特率就就行" tabindex="-1"><a class="header-anchor" href="#注意波特率就就行"><span>注意波特率就就行</span></a></h5><p><img src="'+d+'" alt="图片加载"></p><h4 id="_2-2-2网络通道参数" tabindex="-1"><a class="header-anchor" href="#_2-2-2网络通道参数"><span>2.2.2网络通道参数</span></a></h4><p>服务器地址，端口号，请求的url这三个做服务器功能的人会给你</p><p>下面的自定义头部是为了4g模块能透传cjson数据，复制粘贴就行</p><p>Content-Type=application/json/0d/0aIMEI=${IMEI}/0d/0a</p><p><img src="'+_+'" alt="图片加载"></p><h4 id="_2-2-3测试4g" tabindex="-1"><a class="header-anchor" href="#_2-2-3测试4g"><span>2.2.3测试4g</span></a></h4><p>把核心板插到扩展底板，连上电源线和串口数据线，插上sim卡，就可以用串口调试 助手测试了</p><p>直接发送 {&quot;uid&quot;:&quot;102090&quot;} 看是否能接收到服务器返回的数据，接收到的数据结尾部分和postman接收的数据一致就是正常的</p><h4 id="_2-3测试stm32串口" tabindex="-1"><a class="header-anchor" href="#_2-3测试stm32串口"><span>2.3测试stm32串口</span></a></h4><p>测试串口能否正常发cjson数据和能否处理服务器返回的数据提取flag的值。</p><p>这里就不详细介绍了</p><h4 id="_2-3-1发送cjson数据" tabindex="-1"><a class="header-anchor" href="#_2-3-1发送cjson数据"><span>2.3.1发送cjson数据</span></a></h4><p><img src="'+m+'" alt="图片加载"></p><h4 id="_2-3-2提取flag的值flag-value" tabindex="-1"><a class="header-anchor" href="#_2-3-2提取flag的值flag-value"><span>2.3.2提取flag的值flag_value</span></a></h4><p><img src="'+f+'" alt="图片加载"></p><p>然后连线也记录一下方便后面的维护的人</p><p>uart1(PA9.PA10)连YEDc100核心板Tx1,Rx1</p><p>uart2(PA2,PA3)连读卡器的TX,RX</p><p>stm32和c100要共地</p><p>PB13连接继电器控制端，控制端与stm共地</p><p>c100输入为12v电源，测试时可以带扩展底板，实装只用核心板</p><p><img src="'+u+'" alt="图片加载"></p><p>基本就这些，有问题联系我： QQ:488763619</p><p>感兴趣负责维护的大一大二的橙果友友联系我，我给你们具体的服务器url</p><p>附上几张图片，安装北门时拍的</p><p><img src="'+x+'" alt="图片加载"></p><p><img src="'+b+'" alt="图片加载"></p><p><img src="'+j+'" alt="图片加载"></p><p><img src="'+v+'" alt="图片加载"></p>',36))])}const E=n(k,[["render",B],["__file","4gtongxin.html.vue"]]),D=JSON.parse('{"path":"/blogs/danpianji/4gtongxin.html","title":"4g模块与服务器通信","lang":"en-US","frontmatter":{"title":"4g模块与服务器通信","date":"2025-06-09T00:00:00.000Z","tags":["4g"],"categories":["单片机通信"]},"headers":[{"level":3,"title":"1.整体介绍","slug":"_1-整体介绍","link":"#_1-整体介绍","children":[]},{"level":3,"title":"2.实现步骤","slug":"_2-实现步骤","link":"#_2-实现步骤","children":[]}],"git":{},"filePathRelative":"blogs/单片机/4g通信.md"}');export{E as comp,D as data};
